<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เกม Crossword - คำศัพท์คอมพิวเตอร์</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            color: #333;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #00509e;
            margin-bottom: 10px;
        }
        .crossword {
            width: auto;
        }
        .container {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            gap: 20px;
        }
        .hints {
            width: 30%;
            text-align: left;
        }
        .hint-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px; /* ตัวเล็กลง */
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            padding: 8px;
            margin: 5px 0;
            border-radius: 5px;
            background: #d1ecff;
            color: #00509e;
        }
        table {
            border-collapse: collapse;
            background-color: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
        td {
            width: 50px;
            height: 50px;
            text-align: center;
            vertical-align: middle;
            border: 1px solid #dddddd00;
            position: relative;
        }
        td.empty {
            border: none;
            background: transparent;
        }
        td .number {
            position: absolute;
            top: 2px;
            left: 4px;
            font-size: 12px;
            color: #666;
        }
        input {
            width: 100%;
            height: 100%;
            border: none;
            text-align: center;
            font-size: 28px;
            background-color: #eaf6ff;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            outline: none;
        }
        input:focus {
            background-color: #d1ecff;
            outline: 2px solid #007bff;
        }
        .buttons {
            margin-top: 20px;
        }
        .buttons button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .submit {
            background-color: #28a745;
            color: white;
        }
        .reset {
            background-color: #dc3545;
            color: white;
        }
    </style>
</head>
<body>
    <h1>เกม Crossword - คำศัพท์เกี่ยวกับ Canva</h1>
    <div class="container">
        <div class="crossword">
        <table>
            <tr>
                <td class="empty"></td>
                <td><span class="number">1</span><input type="text" maxlength="1" data-row="0" data-col="1"></td>
                <td><input type="text" maxlength="1" data-row="0" data-col="2"></td>
                <td><input type="text" maxlength="1" data-row="0" data-col="3"></td>
                <td><input type="text" maxlength="1" data-row="0" data-col="4"></td>
                <td><input type="text" maxlength="1" data-row="0" data-col="5"></td>
                <td class="empty"></td>
                <td class="empty"></td>
                <td class="empty"></td>
                <td class="empty"></td>
                <td class="empty"></td>
                <td class="empty"></td>
               
            </tr>
            <tr>
                <td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="1" data-col="1"></td>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><span class="number">5</span><input type="text" maxlength="1" data-row="1" data-col="11"></td>
            </tr>
            <tr>
                <td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="2" data-col="1"></td>
                <td class="empty"></td>
                <td><span class="number">2</span><input type="text" maxlength="1" data-row="2" data-col="3"></td>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="2" data-col="11"></td>
            </tr>
            <tr>
                <td><span class="number">2</span><input type="text" maxlength="1" data-row="3" data-col="0"></td>
                <td><input type="text" maxlength="1" data-row="3" data-col="1"></td>
                <td><input type="text" maxlength="1" data-row="3" data-col="2"></td>
                <td><input type="text" maxlength="1" data-row="3" data-col="3"></td>
                <td><input type="text" maxlength="1" data-row="3" data-col="4"></td>
                <td><span class="number">3</span><input type="text" maxlength="1" data-row="3" data-col="5"></td>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><span class="number">4</span><input type="text" maxlength="1" data-row="3" data-col="9"></td>
                <td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="3" data-col="11"></td>
            </tr>
            <tr>
                <td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="4" data-col="1"></td>
                <td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="4" data-col="3"></td>
                <td class="empty"></td>
                <td><span class="number">3</span><input type="text" maxlength="1" data-row="4" data-col="5"></td>
                <td><input type="text" maxlength="1" data-row="4" data-col="6"></td>
                <td><input type="text" maxlength="1" data-row="4" data-col="7"></td>
                <td><input type="text" maxlength="1" data-row="4" data-col="8"></td>
                <td><input type="text" maxlength="1" data-row="4" data-col="9"></td>
                <td><input type="text" maxlength="1" data-row="4" data-col="10"></td>
                <td><input type="text" maxlength="1" data-row="4" data-col="11"></td>
            </tr>
            <tr>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="5" data-col="3"></td>
                <td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="5" data-col="5"></td>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="5" data-col="9"></td>
                <td class="empty"></td><td class="empty"></td>
            </tr>
            <tr>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="6" data-col="3"></td>
                <td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="6" data-col="5"></td>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="6" data-col="9"></td>
                <td class="empty"></td><td class="empty"></td>
            </tr>
            <tr>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="7" data-col="5"></td>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><input type="text" maxlength="1" data-row="7" data-col="9"></td>
                <td class="empty"></td><td class="empty"></td>
            </tr>
            <tr>
                <td class="empty"></td><td class="empty"></td><td class="empty"></td><td class="empty"></td>
                <td><span class="number">4</span><input type="text" maxlength="1" data-row="8" data-col="4"></td>
                <td><input type="text" maxlength="1" data-row="8" data-col="5"></td>
                <td><input type="text" maxlength="1" data-row="8" data-col="6"></td>
                <td class="empty"></td>
                <td><span class="number">5</span><input type="text" maxlength="1" data-row="8" data-col="8"></td>
                <td><input type="text" maxlength="1" data-row="8" data-col="9"></td>
                <td><input type="text" maxlength="1" data-row="8" data-col="10"></td>
                <td><input type="text" maxlength="1" data-row="8" data-col="11"></td>
            </tr>
        </table>
    </div>        
        <div class="hints">
            <div class="hint-box">
                <p><strong>แนวตั้ง:</strong></p>
                <ul>
                    <li>1. วัตถุหรือโครงสร้างในงานออกแบบ เช่น วงกลม สี่เหลี่ยม</li>
                    <li>2. การทำสำเนาหรือทำซ้ำองค์ประกอบในงาน</li>
                    <li>3. กระบวนการสร้างผลงานที่มีความสวยงาม</li>
                    <li>4. การเปลี่ยนขนาดของวัตถุหรือข้อความ</li>
                    <li>5. ตัวอักษรที่ใช้ในงานออกแบบ</li>
                </ul>
        
                <p><strong>แนวนอน:</strong></p>
                <ul>
                    <li>1. การแบ่งปันไฟล์ รูปภาพ หรือข้อมูลให้ผู้อื่นผ่านแพลตฟอร์มหรืออีเมล</li>
                    <li>2. การส่งไฟล์จากอุปกรณ์ของเราขึ้นไปเก็บไว้ในคลาวด์</li>
                    <li>3. ส่วนประกอบเล็กๆ ในงานออกแบบ เช่น ไอคอน</li>
                    <li>4. การเชื่อมโยงไปยังหน้าเว็บหรือไฟล์อื่นๆ</li>
                    <li>5. รูปแบบไฟล์ภาพที่ไม่มีพื้นหลัง</li>
                </ul>
            </div>
        </div>

    </div>
    <form id="scoreForm" action="/add_score" method="POST">
        <input type="hidden" id="score" name="score" value="{{ score }}">
        <input type="hidden" name="state" value="{{ 'task' }}"> 
        <input type="hidden" name="lesson_name" value="{{ lesson_name }}"> 
        <input type="hidden" name="lesson_id" value="{{ lesson_id }}"> 
            <div class="buttons">
                <button type="button" class="submit" onclick="checkAnswers()">ส่งคะแนน</button>
                <button type="button" class="reset" onclick="resetGame()">เริ่มใหม่</button>
            </div>
        </form>
      
    <script>
        // เก็บคำตอบที่ถูกต้องสำหรับแต่ละคำในรูปแบบอ็อบเจกต์
        const correctWords = {
            '0': 'SHARE',
            '1': 'UPLOAD',
            '2': 'ELEMENT',
            '3': 'PNG',
            '4': 'TEXT',
            '5': 'SHAPE',
            '6': 'COPPY',
            '7': 'DESIGN',
            '8': 'RESIZE',
            '9': 'FONT'
        };
    
        let score = 0;
        function updateScoreDisplay(score) {
            document.getElementById("scoreDisplay").textContent = score;
        }
    
        async function checkAnswers() {
            score = 0;
            let start_row = { '0': 0, '1': 3, '2': 4, '3': 8, '4': 8 , '5': 0, '6': 2, '7': 3, '8': 3, '9': 1};
            let start_col = { '0': 1, '1': 0, '2': 5, '3': 4, '4': 8 , '5': 1, '6': 3, '7': 5, '8': 9, '9': 11};
    
            for (let index = 0; index < 5; index++) {
                checkAnswers2(start_row[index], start_col[index], 1, index);
               
            }
            for (let index = 5; index < 10; index++) {
                checkAnswers2(start_row[index], start_col[index], 2, index);
               
            }


            Swal.fire({
                title: "ผลคะแนนของคุณ",
                text: `คุณได้คะแนน ${score} คะแนน`,
                icon: "success",
                confirmButtonText: "ตกลง"
            }).then(() => {
                // ✅ คำสั่งนี้จะทำงานหลังจากกด "ตกลง"
                console.log("ผู้ใช้กดตกลงแล้ว!");
                document.getElementById('score').value = score;
                document.getElementById('scoreForm').submit();

            });

           
       
        }
    
        function checkAnswers2(row_start, col_start, position, correc_index) {
            let userWord = "";
    
            if (position === 1) {
                for (let col = col_start; col < col_start + correctWords[correc_index].length; col++) {
                    let input = document.querySelector(`input[data-row="${row_start}"][data-col="${col}"]`);
                    if (input) {
                        userWord += input.value.toUpperCase();
                    }
                }
                if (userWord === correctWords[correc_index]) {
                    score++;
                    for (let col = col_start; col < col_start + correctWords[correc_index].length; col++) {
                        let input = document.querySelector(`input[data-row="${row_start}"][data-col="${col}"]`);
                        input.style.backgroundColor = '#c8e6c9';
                    }
                } else {
                    for (let col = col_start; col < col_start + correctWords[correc_index].length; col++) {
                        let input = document.querySelector(`input[data-row="${row_start}"][data-col="${col}"]`);
                        input.style.backgroundColor = '#ffcdd2';
                    }
                }
            }
            else{
                for (let row = row_start; row < row_start + correctWords[correc_index].length; row++) {
                    let input = document.querySelector(`input[data-row="${row}"][data-col="${col_start}"]`);
                    if (input) {
                        userWord += input.value.toUpperCase();
                    }
                }
               
                if (userWord === correctWords[correc_index]) {
                    score++;
                    for (let row = row_start; row < row_start + correctWords[correc_index].length; row++) {
                        let input = document.querySelector(`input[data-row="${row}"][data-col="${col_start}"]`);
                        input.style.backgroundColor = '#c8e6c9';
                    }
                } else {
                    for (let row = row_start; row < row_start + correctWords[correc_index].length; row++) {
                        let input = document.querySelector(`input[data-row="${row}"][data-col="${col_start}"]`);
                        input.style.backgroundColor = '#ffcdd2';
                    }
                }



            }
        }

        function resetGame() {
            // รีเซ็ตคะแนน
            score = 0;

            // เลือก input ทั้งหมดบนหน้าเว็บ (ที่ใช้สำหรับกรอกคำ)
            const inputs = document.querySelectorAll('input[data-row][data-col]');

            // วนลูปเพื่อล้างค่าและรีเซ็ตสีพื้นหลัง
            inputs.forEach(input => {
                input.value = '';  // ล้างข้อความ
                input.style.backgroundColor = '';  // กลับเป็นพื้นหลังปกติ
            });

            alert('เริ่มใหม่เรียบร้อยแล้ว');
        }
    </script>
    
      

</body>
</html>